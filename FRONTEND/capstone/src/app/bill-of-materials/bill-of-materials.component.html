<div>
  <button (click)="toggleForm()">Add New Bill</button>

  <div *ngIf="isFormVisible">
    <form #billForm="ngForm" (ngSubmit)="isEditing ? updateBill() : createBill(billForm)">
      <div>
        <label for="billOfMaterialID">Bill ID:</label>
        <input type="number" id="billOfMaterialID" name="billOfMaterialID" [(ngModel)]="currentBill.billOfMaterialID" required>
      </div>
      <div>
        <label for="serviceRecordID">Service Record ID:</label>
        <input type="number" id="serviceRecordID" name="serviceRecordID" [(ngModel)]="currentBill.serviceRecordID" required>
      </div>
      <div>
        <label for="workItemID">Work Item ID:</label>
        <input type="number" id="workItemID" name="workItemID" [(ngModel)]="currentBill.workItemID" required>
      </div>
      <div>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" [(ngModel)]="currentBill.quantity" required>
      </div>
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>
      <button type="submit">{{ isEditing ? 'Update Bill' : 'Create Bill' }}</button>
      <button type="button" (click)="resetForm()">Cancel</button>
    </form>
  </div>

  <table>
    <thead>
      <tr>
        <th>Bill ID</th>
        <th>Service Record ID</th>
        <th>Work Item ID</th>
        <th>Quantity</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bill of bills">
        <td>{{ bill.billOfMaterialID }}</td>
        <td>{{ bill.serviceRecordID }}</td>
        <td>{{ bill.workItemID }}</td>
        <td>{{ bill.quantity }}</td>
        <td>
          <button (click)="viewBill(bill)">Edit</button>
          <button (click)="deleteBill(bill.billOfMaterialID)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
